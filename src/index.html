<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<button>开始</button>
</body>
</html>
<script type="text/javascript"> var log = console.log</script>
<script type="text/javascript" src="/js/zepto.js"></script>
<script>
	//将对象转化为地址格式的字符串 {name:12, age 12}  => name=12&age=12
	var isPlainObject = function(obj){
		var type = toString.call(obj);
		return type == "[object Object]";
	}
	var isArray = function(obj) {
		var type = toString.call(obj);
		return type == "[object Array]";
	}
	
	var urlObj   = function(obj) {
		var arr = [];
		for (var key in obj) {
			arr.push(key + "=" + encodeURIComponent(obj[key]) );
		}
		return arr.join("&");
	}
	var makeUrl  = function(url, obj) {
		if (url.indexOf("?"))
			return url + urlObj(obj);
		else
			return url + "?" + urlObj(obj);
	};
	/* 
		var a = {name: "leiwuyi", obj: {name:"zhansan",age:15}, arr:[1, 2, 3, 4, 5]};
	 */
	var stringfiy = function(obj) {

		function toStr(key, value){
			if (isPlainObject(value)) {
				var arr = [];
				for (var name in value) {
					arr.push(toStr(name, value[name]))
				}
				return "\""+key+"\""+":{"+arr.join(",")+"}";
			} else if (isArray(value)) {
				var arr = [];
				var len = value.length;
				for (var i = 0; i < len; i++) {
					arr.push(value[i])
				}
				return "\""+key+"\""+":["+arr.join(",")+"]";
			} else {
				return "\""+key+"\"" + ":" + value;
			}
		}
		return toStr("", obj).substring(3)
	}
	log(stringfiy( {name:"'leiwuyi'", age:null,k:{name:"zhansan",age:15, person:{name:"123\\"}},m:[1,2,3,4,5,6]} )) 
	var ExchageHttpClient = function () {

	}
	ExchageHttpClient.prototype.request = function(){

	};
	ExchageHttpClient.prototype.response = function(){

	}
	ExchageHttpClient.datas = {};
	ExchageHttpClient.register = function(options) {
		this.datas["type"] = options;
	}
	//将对象转化为地址格式的字符串 {name:12, age 12}  => name=12&age=12
	ExchageHttpClient.register({
		type: "ObjectToString",
		exchageData: function(data) {
			return urlObj(data)
		}
	});
	//将JOSN转化为JSON字符串
	ExchageHttpClient.register({
		type: "JsonToString",
		exchageData: function(data) {

		}
	})

	$("button").on("click", function() {
		$.ajax({
			type: "GET",
			data: {
				name :"leiwuyi", age: 18
			},
			url : "index",
			success: function(result){
				log(result)
			},
			error: function() {
				log("error")
			}
		})
	})
</script>